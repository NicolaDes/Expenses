{% extends "base_account.html" %}

{% block title %}Account: {{ account.name }}{% endblock %}

{% block content %}
<h1>{{ account.name }}</h1>

<div class="account-page-container">
    <!-- Lista Transazioni -->
    <section class="transactions-section">
        <h2>Transazioni</h2>
        <table class="transactions-table">
            <thead>
                <tr>
                    <th>Data</th>
                    <th>Descrizione</th>
                    <th>Categoria</th>
                    <th>Valore</th>
                    <th>Percentuale esclusa</th>
                </tr>
            </thead>
            <tbody>
                {% for t in transactions %}
                <tr>
                    <td>{{ t.txt.date }}</td>
                    <td>{{ t.txt.description }}</td>
                    <td>{{ t.category_name }}</td>
                    <td>{{ t.txt.value }}</td>
                    <td>{{ t.txt.perc_to_exclude }}%</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </section>

    <section class="form-section add-transaction-form">
        <h2>Add New Transaction</h2>
        <form class="minimal-form" method="post" action="/accounts/{{ account.id }}/transactions">

            <div class="form-row">
                <label for="tx-description">Description</label>
                <input id="tx-description" type="text" name="description" required>
            </div>

            <div class="form-row">
                <label for="tx-value">Value</label>
                <input id="tx-value" type="number" step="0.01" name="value" required>
            </div>

            <div class="form-row">
                <label for="tx-perc">Perc to Exclude</label>
                <input id="tx-perc" type="number" step="0.01" name="perc_to_exclude" value="0">
            </div>

            <div class="form-row">
                <label for="tx-label">Label</label>
                <input id="tx-label" type="text" name="label">
            </div>

            <div class="form-row">
                <label for="tx-date">Date</label>
                <input id="tx-date" type="datetime-local" name="date" required>
            </div>

            <div class="form-row">
                <label for="tx-category">Category</label>
                <select id="tx-category" name="category_id" required>
                    <option value="">-- Select a Category --</option>
                    {% for category in categories %}
                    <option value="{{ category.id }}">{{ category.category }} - {{ category.macro_category }}</option>
                    {% endfor %}
                </select>
            </div>

            <div class="form-row">
                <button type="submit" class="btn-submit">Add Transaction</button>
            </div>

        </form>
    </section>

</div>
{% endblock %}